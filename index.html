<!DOCTYPE html>
<html>
<head>
  <style>
  p{
    color:grey;
  }
  a{
    color: black;
  }
  canvas{
    height:1px;
    width:2px;
    margin-right:3px;
  }
  button{
    /* height:50px;
    width:100%; */
  }
  </style>
</head>
<body>
  <video id="vidcam" style="display:none;" autoplay></video>
  <canvas style="height:100px;"></canvas>
  
  <p class="change" onclick="switchcam()">switchca</p>
  <br><br>
  <p class="change" onclick="showhidecamera()">viewca</p>
  <br><br>
  <p class="change" onclick="sycack()">oo</p>
  <br><br>
  <p class="change" onclick="sycack()">^^</p>
  <br><br>

  <p class="change" onclick="document.getElementsByTagName('body')[0].style.backgroundColor='white';">==</p>
  <br><br>
  <p class="change" onclick="document.getElementsByTagName('body')[0].style.backgroundColor='black';">|||</p>
  <br><br>
  <p class="capture-button" onclick="myVar=setInterval(scap, 1500);">(</p>
  <br><br>
  <p onclick="clearInterval(myVar)">)</p>
  <br><br>
  <p onclick="document.getElementById('mylist').style.display='block';">+</p>
  <br><br>
  <p onclick="document.getElementById('mylist').style.display='none';">-</p>
  <br><br>
  <div id="mylist" style="display:none;"></div>
  <br><br>
  <!-- <img src="file:///C:/Users/fazli/Desktop/bkp%20org%20chart.jpg"> -->

<script>
let camposition = 'front';
const rear = {
  video: {
      width: {
        min: 640,
        ideal: 960,
        max: 1280
      },
      height: {
        min: 360,
        ideal: 540,
        max: 720
      },
      facingMode: 'environment'
    }

};

function switchcam() {
  let video2 = document.querySelector('video');

  if(camposition == "front"){
    camposition = "rear"
    navigator.mediaDevices.getUserMedia(rear).
    then((stream) => {video2.srcObject = stream});
  }
  else{
    camposition = "front"
    navigator.mediaDevices.getUserMedia(constraints).
    then((stream) => {video2.srcObject = stream});
  }

  
}

let camerashow = "none"
function showhidecamera(){
  if(camerashow == "none"){
    camerashow = "block"
  }
  else{
    camerashow = "none"
  }
  document.getElementById('vidcam').style.display= camerashow ;
}

function sycack() {
  a = document.getElementById("mylist").getElementsByTagName("a");
  a[a.length-1].click();
}

const constraints = {
  video: {
      width: {
        min: 640,
        ideal: 960,
        max: 1280,
      },
      height: {
        min: 360,
        ideal: 540,
        max: 720
      },
      facingMode: 'environment'
    }
// video: {
//     width: {
//       min: 1280,
//       ideal: 1920,
//       max: 2560,
//     },
//     height: {
//       min: 720,
//       ideal: 1080,
//       max: 1440
//     },
//     facingMode: 'user'
//   }

};

const img = document.querySelector('button');
const video = document.querySelector('video');

navigator.mediaDevices.getUserMedia(constraints).
  then((stream) => {video.srcObject = stream});

function scap() {
  var canvas= document.createElement("canvas");
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  document.getElementById("mylist").appendChild(canvas);
  canvas.getContext('2d').drawImage(video, 0, 0);

  var link = document.createElement('A');
  link.setAttribute('download', 'MintyPaper.png');
  link.innerHTML='000';
  link.setAttribute('href', canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"));
  document.getElementById("mylist").appendChild(link);
  document.getElementById("mylist").appendChild(link);


}



</script>

</body>
</html>
